---
- hosts: localhost
  tasks:
  - name: valid git version 
    yum: name=git state=latest
    become: yes
    become_method: sudo
  - name: clone petclinic
    git: repo=https://github.com/shimib/spring-petclinic.git dest=~/petclinic
  - name: clone trepo 
    git: repo=https://github.com/Ahmad-Mahagna/trepo.git dest=~/trepo update=no
  - name: install docker
    yum: name=docker state=latest
    become: yes
    become_method: sudo
  - name: update user ec2-user with docker group permission
    user: name=ec2-user group=docker append=yes
    become: yes
    become_method: sudo
  - name: start docker daemon
    service: name=docker state=started
    become: yes
    become_method: sudo
  - name: install maven
    unarchive: src=http://apache.mivzakim.net/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz copy=no dest=~ creates=~/apache-maven-3.3.9
